<!-- Skip link for keyboard users -->
<a href="#main-content" class="sr-only sr-only-focusable">Skip to main content</a>

<main id="main-content" role="main">
<div id="dp-wrapper" class="dp-wrapper">
  <div class="dp-progress-placeholder dp-module-progress-icons" style="display: none;" aria-hidden="true">Icon Progress Bar (browser only)</div>

  <div class="dp-content-block content-block" data-title="K-Nearest Neighbors (KNN)">
    <h2 class="dp-has-icon"><i class="dp-icon fas fa-users" aria-hidden="true"></i>&nbsp;K-Nearest Neighbors (KNN)</h2>
    <div class="dp-card card" style="border-left: 4px solid #034638; padding-left: 15px;">
      <div class="card-body">
        <h3 class="card-title dp-ignore-theme">What this page covers</h3>
        <p>Intuition and practice of a simple, surprisingly strong baseline for <strong>classification</strong> and <strong>regression</strong> that makes predictions by looking at the <em>K closest examples</em> in your training data.</p>
      </div>
    </div>
  </div>


  <div class="dp-content-block content-block" data-title="Intuition & Basics">
    <h2 class="dp-has-icon"><i class="dp-icon fas fa-lightbulb" aria-hidden="true"></i>&nbsp;Intuition & Basics</h2>
    <div class="dp-panels-wrapper dp-accordion-default dp-panel-hover-color-dp-white dp-panel-active-color-dark">
      <div class="dp-panel-group">
        <h3 class="dp-panel-heading" role="button" tabindex="0" aria-expanded="false" aria-controls="knn-intuition" id="knn-intuition-heading">How KNN predicts</h3>
        <div id="knn-intuition" class="dp-panel-content" role="region" aria-labelledby="knn-intuition-heading" hidden>
          <p>Given a new point, find its <strong>K nearest neighbors</strong> in the training set and:
            <ul>
              <li><strong>Classification:</strong> predict the <em>majority label</em> among the K neighbors (optionally weighted by distance).</li>
              <li><strong>Regression:</strong> predict the <em>average</em> of the neighbors’ target values (optionally distance‑weighted).</li>
            </ul>
          </p>
          <p class="mb-0"><em>Note:</em> KNN is <strong>non‑parametric</strong>—there’s no explicit training step beyond storing the data.</p>
        </div>
      </div>
      <div class="dp-panel-group">
        <h3 class="dp-panel-heading" role="button" tabindex="0" aria-expanded="false" aria-controls="knn-k" id="knn-k-heading">Choosing K</h3>
        <div id="knn-k" class="dp-panel-content" role="region" aria-labelledby="knn-k-heading" hidden>
          <ul class="list-group list-group-flush">
            <li class="list-group-item"><strong>Small K</strong> → low bias, high variance (can overfit to noise).</li>
            <li class="list-group-item"><strong>Large K</strong> → smoother boundary, higher bias (may blur classes).</li>
            <li class="list-group-item">Common starting points: 3, 5, 7; pick K via validation (and keep K odd for binary classes to reduce ties).</li>
          </ul>
        </div>
      </div>
      <div class="dp-panel-group">
        <h3 class="dp-panel-heading" role="button" tabindex="0" aria-expanded="false" aria-controls="knn-dist" id="knn-dist-heading">Distance & scaling</h3>
        <div id="knn-dist" class="dp-panel-content" role="region" aria-labelledby="knn-dist-heading" hidden>
          <p>Different features must be on comparable scales or one unit can dominate distance.</p>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Scale features (standardize or normalize).</li>
            <li class="list-group-item">Try <strong>Euclidean</strong> (default), <strong>Manhattan</strong> (robust to outliers), or custom metrics.</li>
            <li class="list-group-item">Optional: <em>distance‑weighted</em> voting/averaging (closer neighbors count more).</li>
          </ul>
        </div>
      </div>
      <div class="dp-panel-group">
        <h3 class="dp-panel-heading" role="button" tabindex="0" aria-expanded="false" aria-controls="knn-tradeoffs" id="knn-tradeoffs-heading">Pros, Cons & Trade‑offs</h3>
        <div id="knn-tradeoffs" class="dp-panel-content" role="region" aria-labelledby="knn-tradeoffs-heading" hidden>
          <div class="row">
            <div class="col-md-6">
              <div class="dp-card card h-100" style="border-left: 4px solid #16a34a; padding-left: 12px;">
                <div class="card-body">
                  <h6 class="card-title">✅ Strengths</h6>
                  <ul class="mb-0">
                    <li>Simple, strong baseline.</li>
                    <li>Adapts to complex boundaries with enough data.</li>
                    <li>No model assumptions.</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="dp-card card h-100" style="border-left: 4px solid #dc2626; padding-left: 12px;">
                <div class="card-body">
                  <h6 class="card-title">⚠️ Cautions</h6>
                  <ul class="mb-0">
                    <li>Slow at prediction (must search neighbors).</li>
                    <li>Memory‑heavy (stores training data).</li>
                    <li>Sensitive to irrelevant features & scale.</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="dp-content-block content-block" data-title="Interactive: Play with K">
    <h2 class="dp-has-icon"><i class="dp-icon fas fa-play-circle" aria-hidden="true"></i>&nbsp;Interactive: Play with K</h2>
    <p class="mt-2"><em>Try it:</em> Move the K slider and watch the decision boundary change. Then toggle feature scaling and see how distances—and predictions—shift.</p>
    <div class="dp-embed-wrapper">
      <iframe title="KNN Boundary Explorer" role="application" src="https://jkruckivey.github.io/AI-Prototyping-course/demos/widgets/week2/w2-knn-boundary.html" width="100%" height="750" loading="lazy" allowfullscreen aria-label="Interactive demo to adjust K and scaling to see how the KNN decision boundary changes"></iframe>
    </div>
  </div>

  <div class="dp-content-block content-block" data-title="KNN for Regression">
    <h2 class="dp-has-icon"><i class="dp-icon fas fa-chart-area" aria-hidden="true"></i>&nbsp;KNN for Regression</h2>
    <div class="dp-panels-wrapper dp-accordion-default dp-panel-hover-color-dp-white">
      <div class="dp-panel-group">
        <h3 class="dp-panel-heading" role="button" tabindex="0" aria-expanded="false" aria-controls="knn-reg" id="knn-reg-heading">Averaging neighbors</h3>
        <div id="knn-reg" class="dp-panel-content" role="region" aria-labelledby="knn-reg-heading" hidden>
          <p>Predict a numeric target by averaging the K nearest neighbors’ target values. Use <strong>distance weighting</strong> to give closer points more influence.</p>
        </div>
      </div>
      <div class="dp-panel-group">
        <h3 class="dp-panel-heading" role="button" tabindex="0" aria-expanded="false" aria-controls="knn-reg-metrics" id="knn-reg-metrics-heading">Metrics & evaluation</h3>
        <div id="knn-reg-metrics" class="dp-panel-content" role="region" aria-labelledby="knn-reg-metrics-heading" hidden>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Use MAE/MSE/RMSE; compare against simple baselines (mean/median).</li>
            <li class="list-group-item">For time‑series, use <strong>time‑aware splits</strong> (no future leakage).</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="dp-content-block content-block" data-title="Performance Considerations">
    <h2 class="dp-has-icon"><i class="dp-icon fas fa-tachometer-alt" aria-hidden="true"></i>&nbsp;Performance Considerations</h2>
    <div class="dp-panels-wrapper dp-accordion-default dp-panel-hover-color-dp-white">
      <div class="dp-panel-group">
        <h3 class="dp-panel-heading" role="button" tabindex="0" aria-expanded="false" aria-controls="knn-index" id="knn-index-heading">Speeding up neighbor search</h3>
        <div id="knn-index" class="dp-panel-content" role="region" aria-labelledby="knn-index-heading" hidden>
          <p>Exact search can be slow at scale. Options include indexing structures (KD‑tree/ball tree), approximate nearest neighbors, or pruning features.</p>
        </div>
      </div>
      <div class="dp-panel-group">
        <h3 class="dp-panel-heading" role="button" tabindex="0" aria-expanded="false" aria-controls="knn-pipeline" id="knn-pipeline-heading">Pipeline hygiene</h3>
        <div id="knn-pipeline" class="dp-panel-content" role="region" aria-labelledby="knn-pipeline-heading" hidden>
          <p>Fit scalers on the <strong>training</strong> set only, then apply to validation/test to avoid leakage. Keep the same scaler in production.</p>
        </div>
      </div>
    </div>
  </div>

  <div class="dp-callout dp-callout-placeholder card dp-callout-position-default w-100 dp-callout-type-default dp-callout-color-dp-primary">
    <div class="card-body">
      <h3 class="card-title">Helpful Tip</h3>
      <p class="card-text">Start with a small grid of K values (3–15) and choose via validation. Always scale features first.</p>
    </div>
  </div>

  <hr aria-hidden="true" />
  <p>Select <strong>Next▸</strong> to continue.</p>
</div>
</main>

<!-- Canvas‑safe toggling -->
<script>
(function () {
  function toggleHead(h){
    const content = document.getElementById(h.getAttribute('aria-controls'));
    const expanded = h.getAttribute('aria-expanded') === 'true';
    h.setAttribute('aria-expanded', String(!expanded));
    if (content) content.hidden = expanded;
  }
  document.addEventListener('click', function (e) {
    const h = e.target.closest('.dp-panel-heading[role=\"button\"]');
    if (h) toggleHead(h);
  });
  document.addEventListener('keydown', function (e) {
    if ((e.key === 'Enter' || e.key === ' ') && e.target.matches('.dp-panel-heading[role=\"button\"]')) {
      e.preventDefault(); toggleHead(e.target);
    }
  });
})();
</script>
