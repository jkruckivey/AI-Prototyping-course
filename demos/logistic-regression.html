<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Logistic Regression Interactive Demo</title>
  <link rel="stylesheet" href="shared-demo.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="site-title">Logistic Regression: Step-by-Step</h1>
      <p class="site-subtitle">Master classification through interactive exploration</p>
    </header>

    <main class="main-content">
      <!-- Step Navigation -->
      <section class="step-navigation">
        <div class="nav-container">
          <button class="nav-btn active" data-step="1">1. The Problem</button>
          <button class="nav-btn" data-step="2">2. Why Sigmoid?</button>
          <button class="nav-btn" data-step="3">3. Parameters</button>
          <button class="nav-btn" data-step="4">4. Classification</button>
          <button class="nav-btn" data-step="5">5. Practice</button>
        </div>
      </section>

      <!-- Step 1: The Classification Problem -->
      <section class="demo-step active" id="step1">
        <div class="step-header">
          <h2>🍎🍊 The Classification Problem</h2>
          <p class="step-intro">Let's start with a real scenario: distinguishing apples from oranges using their features.</p>
        </div>
        
        <div class="step-content">
          <div class="problem-explanation">
            <div class="scenario-box">
              <h3>🛒 Real-World Scenario</h3>
              <p>You're building a smart grocery scanner. When someone scans a fruit, your system needs to answer: <strong>"Is this an apple or an orange?"</strong></p>
              
              <div class="key-insight">
                <strong>🔍 Key Insight:</strong> This is different from predicting a number (like price). Here we need to <em>classify</em> - put things into discrete categories.
              </div>
            </div>

            <div class="data-explanation">
              <h3>📊 Our Data Features</h3>
              <div class="feature-explanations">
                <div class="feature-explanation">
                  <strong>🎨 Color Score (0-10):</strong>
                  <div class="color-scale">
                    <span class="scale-point green">0 = Green</span>
                    <span class="scale-point yellow">5 = Yellow/Orange</span>
                    <span class="scale-point red">10 = Deep Red</span>
                  </div>
                  <p>Higher scores indicate more red coloration (typical of apples)</p>
                </div>
                
                <div class="feature-explanation">
                  <strong>⚖️ Weight (kg):</strong>
                  <p>Typical range: 0.05kg - 0.30kg</p>
                  <p>Oranges tend to be heavier on average, but there's overlap!</p>
                </div>
              </div>
            </div>

            <div class="classification-examples">
              <h3>🧠 What We're Teaching the Computer</h3>
              <div class="example-fruits">
                <div class="fruit-example apple">
                  <div class="fruit-icon">🍎</div>
                  <div class="fruit-details">
                    <strong>Typical Apple</strong>
                    <div class="fruit-features">
                      <div>Color: 7.5 (reddish)</div>
                      <div>Weight: 0.18kg</div>
                      <div class="probability">→ <strong>Apple!</strong></div>
                    </div>
                  </div>
                </div>
                
                <div class="fruit-example orange">
                  <div class="fruit-icon">🍊</div>
                  <div class="fruit-details">
                    <strong>Typical Orange</strong>
                    <div class="fruit-features">
                      <div>Color: 4.2 (orange)</div>
                      <div>Weight: 0.25kg</div>
                      <div class="probability">→ <strong>Orange!</strong></div>
                    </div>
                  </div>
                </div>

                <div class="fruit-example boundary">
                  <div class="fruit-icon">🤔</div>
                  <div class="fruit-details">
                    <strong>Tricky Case</strong>
                    <div class="fruit-features">
                      <div>Color: 6.0 (in-between)</div>
                      <div>Weight: 0.20kg</div>
                      <div class="probability">→ <strong>Needs probability!</strong></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="step-actions">
          <button class="btn btn-primary next-step" data-next="2">Next: Why Do We Need a Curve? →</button>
        </div>
      </section>

      <!-- Step 2: Why Sigmoid Function -->
      <section class="demo-step" id="step2">
        <div class="step-header">
          <h2>🤔 Why Can't We Use a Straight Line?</h2>
          <p class="step-intro">Understanding why logistic regression needs the sigmoid function</p>
        </div>
        
        <div class="step-content">
          <div class="linear-problem">
            <h3>❌ The Problem with Linear Regression</h3>
            
            <div class="problem-illustration">
              <div class="problem-box linear-issue">
                <h4>📏 Straight Line Issues:</h4>
                <div class="issue-list">
                  <div class="issue">
                    <strong>Issue #1:</strong> Could predict "150% chance it's an apple"
                    <em>But probabilities can't exceed 100%! 🚫</em>
                  </div>
                  <div class="issue">
                    <strong>Issue #2:</strong> Could predict "-30% chance it's an apple"
                    <em>Negative probabilities make no sense! 🤯</em>
                  </div>
                  <div class="issue">
                    <strong>Issue #3:</strong> No clear decision boundary
                    <em>When does "maybe apple" become "definitely apple"? 🤷</em>
                  </div>
                </div>
              </div>

              <div class="solution-box sigmoid-solution">
                <h4>✅ What We Actually Need:</h4>
                <div class="solution-list">
                  <div class="solution">
                    <strong>Requirement #1:</strong> Always stay between 0% and 100%
                    <em>Valid probabilities only! ✨</em>
                  </div>
                  <div class="solution">
                    <strong>Requirement #2:</strong> Smooth transitions
                    <em>No sudden jumps from 0% to 100% 📈</em>
                  </div>
                  <div class="solution">
                    <strong>Requirement #3:</strong> Clear decision point
                    <em>50% becomes our natural boundary 🎯</em>
                  </div>
                </div>
              </div>
            </div>

            <div class="sigmoid-introduction">
              <h3>🎢 Meet the Sigmoid Function</h3>
              <div class="sigmoid-analogy">
                <div class="analogy-visual">
                  <h4>Think of it like a playground slide:</h4>
                  <div class="slide-metaphor">
                    <div class="slide-part high">
                      <strong>Top of slide:</strong> Approaches 100% (but never quite reaches it)
                    </div>
                    <div class="slide-part middle">
                      <strong>Middle section:</strong> Smooth transition around 50%
                    </div>
                    <div class="slide-part low">
                      <strong>Bottom of slide:</strong> Approaches 0% (but never quite reaches it)
                    </div>
                  </div>
                </div>
                
                <div class="sigmoid-formula">
                  <h4>📐 The Mathematical Magic:</h4>
                  <div class="formula-box">
                    <div class="formula">Sigmoid(x) = 1 / (1 + e^(-x))</div>
                    <div class="formula-explanation">
                      Takes ANY number → Always outputs between 0 and 1
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="step-actions">
          <button class="btn btn-outline prev-step" data-prev="1">← Back</button>
          <button class="btn btn-primary next-step" data-next="3">Next: Understanding Parameters →</button>
        </div>
      </section>

      <!-- Step 3: Parameters Deep Dive -->
      <section class="demo-step" id="step3">
        <div class="step-header">
          <h2>🎛️ Understanding the Parameters</h2>
          <p class="step-intro">Learn how weight and bias control the sigmoid curve</p>
        </div>
        
        <div class="step-content">
          <div class="parameter-explanation">
            <div class="weight-explanation">
              <h3>📏 Weight Parameter: Controls the "Steepness"</h3>
              <div class="weight-details">
                <div class="weight-concept">
                  <h4>🤔 What does the weight actually do?</h4>
                  <p>The weight determines how <strong>confident</strong> our model becomes as we move away from the decision boundary.</p>
                  
                  <div class="weight-examples">
                    <div class="weight-example low">
                      <strong>Low Weight (0.5):</strong>
                      <div class="example-case">Color 8.0 → ~65% apple</div>
                      <div class="interpretation">Gentle, uncertain decisions 🤷</div>
                    </div>
                    
                    <div class="weight-example high">
                      <strong>High Weight (3.0):</strong>
                      <div class="example-case">Color 8.0 → ~95% apple</div>
                      <div class="interpretation">Sharp, confident decisions 🎯</div>
                    </div>
                  </div>
                </div>
                
                <div class="weight-analogy">
                  <h4>🎢 Slide Analogy:</h4>
                  <div class="slide-comparison">
                    <div class="gentle-slide">
                      <strong>Gentle slide (low weight):</strong> Long, gradual slope
                      <br><em>Takes a while to get from "maybe" to "definitely"</em>
                    </div>
                    <div class="steep-slide">
                      <strong>Steep slide (high weight):</strong> Sharp drop
                      <br><em>Quickly goes from "maybe" to "definitely"</em>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="bias-explanation">
              <h3>↔️ Bias Parameter: Shifts the Decision Point</h3>
              <div class="bias-details">
                <div class="bias-concept">
                  <h4>🎯 What does bias control?</h4>
                  <p>Bias shifts WHERE the 50% decision point occurs along our feature scale.</p>
                  
                  <div class="bias-examples">
                    <div class="bias-example left">
                      <strong>Negative Bias:</strong>
                      <div class="example-case">50% point at Color 3.0</div>
                      <div class="interpretation">Favors "apple" classification 🍎</div>
                    </div>
                    
                    <div class="bias-example right">
                      <strong>Positive Bias:</strong>
                      <div class="example-case">50% point at Color 7.0</div>
                      <div class="interpretation">Favors "orange" classification 🍊</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="interactive-params">
              <h3>🎮 Try It Yourself</h3>
              <div class="param-controls">
                <div class="control-group">
                  <label for="weight">Weight (Steepness): <span id="weightValue">1.0</span></label>
                  <input type="range" id="weight" min="0.1" max="3.0" step="0.1" value="1.0">
                  <div class="control-explanation">
                    <span class="gentle">Gentle curve ←</span>
                    <span class="steep">→ Sharp curve</span>
                  </div>
                </div>
                
                <div class="control-group">
                  <label for="bias">Bias (Shift): <span id="biasValue">0.0</span></label>
                  <input type="range" id="bias" min="-3.0" max="3.0" step="0.1" value="0.0">
                  <div class="control-explanation">
                    <span class="left-shift">← Favor apples</span>
                    <span class="right-shift">Favor oranges →</span>
                  </div>
                </div>
                
                <div class="test-predictions">
                  <h4>🔍 Test Different Inputs:</h4>
                  <div class="test-cases">
                    <div class="test-case" data-input="3">Color 3.0: <span class="prediction" id="pred3">---%</span></div>
                    <div class="test-case" data-input="5">Color 5.0: <span class="prediction" id="pred5">---%</span></div>
                    <div class="test-case" data-input="7">Color 7.0: <span class="prediction" id="pred7">---%</span></div>
                  </div>
                </div>
              </div>

              <div class="curve-visualization">
                <div id="sigmoidPlot"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="step-actions">
          <button class="btn btn-outline prev-step" data-prev="2">← Back</button>
          <button class="btn btn-primary next-step" data-next="4">Next: Making Classifications →</button>
        </div>
      </section>

      <!-- Step 4: Classification Process -->
      <section class="demo-step" id="step4">
        <div class="step-header">
          <h2>🎯 From Probabilities to Classifications</h2>
          <p class="step-intro">Learn how we convert sigmoid outputs into final decisions</p>
        </div>
        
        <div class="step-content">
          <div class="classification-process">
            <div class="threshold-explanation">
              <h3>🎚️ The Decision Threshold</h3>
              <div class="threshold-concept">
                <p>The sigmoid gives us probabilities, but we need clear yes/no decisions. Enter the <strong>threshold</strong>!</p>
                
                <div class="threshold-demo">
                  <div class="threshold-rule">
                    <h4>📏 The Rule:</h4>
                    <div class="rule-box">
                      <div class="rule-case high">
                        <strong>If probability ≥ threshold:</strong> Classify as Apple 🍎
                      </div>
                      <div class="rule-case low">
                        <strong>If probability < threshold:</strong> Classify as Orange 🍊
                      </div>
                    </div>
                  </div>
                  
                  <div class="threshold-adjuster">
                    <label for="threshold">Decision Threshold: <span id="thresholdValue">0.5</span></label>
                    <input type="range" id="threshold" min="0.1" max="0.9" step="0.05" value="0.5">
                    <div class="threshold-effects">
                      <div class="effect low-thresh">Lower → More apples classified</div>
                      <div class="effect high-thresh">Higher → More oranges classified</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="classification-examples">
              <h3>📝 Step-by-Step Examples</h3>
              <div class="examples-container">
                <div class="example-walkthrough" id="example1">
                  <h4>Example 1: Clear Apple Case</h4>
                  <div class="walkthrough-steps">
                    <div class="walkthrough-step">
                      <strong>Step 1:</strong> Input features
                      <div class="step-data">Color: 8.5, Weight: 0.17kg</div>
                    </div>
                    <div class="walkthrough-step">
                      <strong>Step 2:</strong> Apply sigmoid
                      <div class="step-data">Probability = <span id="prob1">0.85</span> (85%)</div>
                    </div>
                    <div class="walkthrough-step">
                      <strong>Step 3:</strong> Compare to threshold
                      <div class="step-data">0.85 ≥ <span id="thresh1">0.5</span> ✅</div>
                    </div>
                    <div class="walkthrough-step final">
                      <strong>Result:</strong> <span class="classification apple" id="result1">🍎 Apple</span>
                      <div class="confidence">High confidence!</div>
                    </div>
                  </div>
                </div>

                <div class="example-walkthrough" id="example2">
                  <h4>Example 2: Boundary Case</h4>
                  <div class="walkthrough-steps">
                    <div class="walkthrough-step">
                      <strong>Step 1:</strong> Input features
                      <div class="step-data">Color: 5.2, Weight: 0.21kg</div>
                    </div>
                    <div class="walkthrough-step">
                      <strong>Step 2:</strong> Apply sigmoid
                      <div class="step-data">Probability = <span id="prob2">0.48</span> (48%)</div>
                    </div>
                    <div class="walkthrough-step">
                      <strong>Step 3:</strong> Compare to threshold
                      <div class="step-data">0.48 < <span id="thresh2">0.5</span> ❌</div>
                    </div>
                    <div class="walkthrough-step final">
                      <strong>Result:</strong> <span class="classification orange" id="result2">🍊 Orange</span>
                      <div class="confidence">Low confidence - close call!</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="visualization-section">
              <h3>📊 Live Classification Plot</h3>
              <div class="plot-explanation">
                <p>Watch how changing parameters affects the classification of our fruit dataset:</p>
                <div class="plot-legend">
                  <span class="legend-item apple">🍎 Classified as Apple</span>
                  <span class="legend-item orange">🍊 Classified as Orange</span>
                  <span class="legend-item boundary">🎯 Decision Boundary</span>
                </div>
              </div>
              <div class="classification-plot">
                <div id="classificationPlot"></div>
              </div>
              
              <div class="plot-metrics">
                <div class="metric-box">
                  <div class="metric">
                    <span class="metric-label">Total Accuracy:</span>
                    <span class="metric-value" id="accuracy">85%</span>
                  </div>
                  <div class="metric">
                    <span class="metric-label">Apples Correct:</span>
                    <span class="metric-value apple" id="applesCorrect">12/15</span>
                  </div>
                  <div class="metric">
                    <span class="metric-label">Oranges Correct:</span>
                    <span class="metric-value orange" id="orangesCorrect">10/12</span>
                  </div>
                </div>
                <button id="optimizeParams" class="btn btn-secondary">Find Best Parameters</button>
              </div>
            </div>
          </div>
        </div>

        <div class="step-actions">
          <button class="btn btn-outline prev-step" data-prev="3">← Back</button>
          <button class="btn btn-primary next-step" data-next="5">Next: Practice Time →</button>
        </div>
      </section>

      <!-- Step 5: Practice -->
      <section class="demo-step" id="step5">
        <div class="step-header">
          <h2>🚀 Practice Your Skills</h2>
          <p class="step-intro">Test your understanding with interactive challenges</p>
        </div>
        
        <div class="step-content">
          <div class="practice-section">
            <div class="fruit-classifier">
              <h3>🎯 Fruit Classification Challenge</h3>
              <div class="classifier-interface">
                <div class="input-section">
                  <h4>Enter fruit characteristics:</h4>
                  <div class="input-row">
                    <div class="input-group">
                      <label for="practiceColor">Color Score (0-10):</label>
                      <input type="number" id="practiceColor" value="6.0" min="0" max="10" step="0.1">
                      <div class="input-hint">0=Green → 10=Red</div>
                    </div>
                    
                    <div class="input-group">
                      <label for="practiceWeight">Weight (kg):</label>
                      <input type="number" id="practiceWeight" value="0.18" min="0.05" max="0.35" step="0.005">
                      <div class="input-hint">Typical range: 0.05-0.35kg</div>
                    </div>
                  </div>
                  
                  <button id="classifyFruit" class="btn btn-primary">Classify This Fruit!</button>
                </div>

                <div class="prediction-display">
                  <div class="prediction-steps">
                    <div class="prediction-step">
                      <strong>1. Sigmoid Calculation:</strong>
                      <div class="calc-display">
                        <div class="formula-applied">
                          Input: <span id="inputDisplay">6.0</span> → 
                          Probability: <span id="probabilityDisplay">0.73</span> (<span id="percentDisplay">73%</span>)
                        </div>
                      </div>
                    </div>
                    
                    <div class="prediction-step">
                      <strong>2. Threshold Comparison:</strong>
                      <div class="threshold-comparison">
                        <span id="probCompare">0.73</span> 
                        <span id="comparisonSymbol">≥</span> 
                        <span id="thresholdCompare">0.5</span>
                        <span id="comparisonResult">✅</span>
                      </div>
                    </div>
                    
                    <div class="prediction-step final-result">
                      <strong>3. Final Classification:</strong>
                      <div class="classification-display">
                        <span class="fruit-result" id="finalClassification">🍎 Apple</span>
                        <div class="confidence-display">
                          <div class="confidence-bar">
                            <div class="confidence-fill" id="confidenceFill" style="width: 73%;"></div>
                          </div>
                          <span class="confidence-text" id="confidenceText">High Confidence</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="concept-quiz">
              <h3>🧠 Quick Understanding Check</h3>
              <div class="quiz-questions">
                <div class="quiz-question">
                  <h4>Question: What happens if we increase the weight parameter?</h4>
                  <div class="quiz-options">
                    <button class="quiz-option" data-correct="false">The decision boundary shifts left</button>
                    <button class="quiz-option" data-correct="true">The sigmoid curve becomes steeper</button>
                    <button class="quiz-option" data-correct="false">All predictions become 50%</button>
                  </div>
                  <div class="quiz-explanation hidden">
                    <strong>Correct!</strong> Higher weight makes the sigmoid curve steeper, leading to more confident (extreme) predictions. The decision boundary location is controlled by the bias parameter.
                  </div>
                </div>

                <div class="quiz-question">
                  <h4>Question: Why can't we use linear regression for classification?</h4>
                  <div class="quiz-options">
                    <button class="quiz-option" data-correct="false">It's too slow to compute</button>
                    <button class="quiz-option" data-correct="true">It can output impossible probabilities (like 150%)</button>
                    <button class="quiz-option" data-correct="false">It only works with two features</button>
                  </div>
                  <div class="quiz-explanation hidden">
                    <strong>Exactly!</strong> Linear regression outputs can be any real number, but probabilities must be between 0 and 1. The sigmoid function naturally constrains outputs to this valid range.
                  </div>
                </div>
              </div>
            </div>

            <div class="key-takeaways">
              <h3>🎓 Key Takeaways</h3>
              <div class="takeaway-list">
                <div class="takeaway">
                  <strong>🎯 Classification vs Regression:</strong> Logistic regression predicts categories, not continuous values
                </div>
                <div class="takeaway">
                  <strong>📐 Sigmoid Magic:</strong> Maps any input to valid probabilities (0-1 range)
                </div>
                <div class="takeaway">
                  <strong>⚖️ Weight Parameter:</strong> Controls confidence - higher weight = steeper decisions
                </div>
                <div class="takeaway">
                  <strong>🎚️ Decision Threshold:</strong> Converts probabilities to classifications (usually 0.5)
                </div>
                <div class="takeaway">
                  <strong>🎢 S-Curve Shape:</strong> Provides smooth transitions between "definitely class A" and "definitely class B"
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="step-actions">
          <button class="btn btn-outline prev-step" data-prev="4">← Back</button>
          <button class="btn btn-secondary" onclick="location.reload()">🔄 Start Over</button>
        </div>
      </section>
    </main>
  </div>

  <script src="logistic-regression.js"></script>
</body>
</html>